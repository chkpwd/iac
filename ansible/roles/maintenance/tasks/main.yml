---
- name: APT Maintenance
  ansible.builtin.apt:
    update_cache: true
    upgrade: false
    autoremove: true
    autoclean: true
    purge: true
  register: apt_update

- name: Check if docker prune is needed
  when: "'docker_hosts' in group_names"
  ansible.builtin.include_tasks: docker_prune.yml

- name: Check if system reboot is required
  become: true
  ansible.builtin.stat:
    path: /var/run/reboot-required
  register: reboot_required

- name: Check if update is needed
  ansible.builtin.include_tasks: apt.yml
